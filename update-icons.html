<!DOCTYPE html>
<html>
<head>
    <title>Update Icons - Supabase</title>
</head>
<body>
    <h1>Update Database Icons</h1>
    <button id="updateBtn">Update Icons</button>
    <div id="result"></div>

    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js'
        
        const supabaseUrl = 'https://gzucqoupjfnwkesgyybc.supabase.co'
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dWNxb3VwamZud2tlc2d5eWJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0NzcyMDIsImV4cCI6MjA2ODA1MzIwMn0.8arMBFFlzG5L_1ctcTp6j6boBES1lDCpxawM903KwdI'
        
        const supabase = createClient(supabaseUrl, supabaseKey)
        
        document.getElementById('updateBtn').addEventListener('click', async () => {
            const resultDiv = document.getElementById('result')
            resultDiv.innerHTML = '<p>Updating icons...</p>'
            
            try {
                const updates = [
                    { old: 'fas fa-tachometer-alt', new: 'faTachometerAlt' },
                    { old: 'fas fa-database', new: 'faDatabase' },
                    { old: 'fas fa-user', new: 'faUser' },
                    { old: 'fas fa-eye', new: 'faEye' },
                    { old: 'users', new: 'faUsers' },
                    { old: 'graduation-cap', new: 'faGraduationCap' },
                    { old: 'book', new: 'faBook' }
                ]
                
                let results = []
                
                for (const update of updates) {
                    console.log(`Updating ${update.old} ‚Üí ${update.new}`)
                    
                    const { data, error } = await supabase
                        .from('menus')
                        .update({ menu_icon: update.new })
                        .eq('menu_icon', update.old)
                    
                    if (error) {
                        console.error(`Error updating ${update.old}:`, error)
                        results.push(`‚ùå Error updating ${update.old}: ${error.message}`)
                    } else {
                        console.log(`‚úÖ Updated ${update.old} ‚Üí ${update.new}`)
                        results.push(`‚úÖ Updated ${update.old} ‚Üí ${update.new}`)
                    }
                }
                
                // Check results
                const { data: menus, error: selectError } = await supabase
                    .from('menus')
                    .select('menu_id, menu_name, menu_icon')
                    .order('menu_order')
                
                if (selectError) {
                    console.error('Error fetching updated menus:', selectError)
                    results.push(`‚ùå Error fetching menus: ${selectError.message}`)
                } else {
                    console.log('üìã Updated menus:', menus)
                    results.push('<h3>Updated Menus:</h3>')
                    menus.forEach(menu => {
                        results.push(`${menu.menu_name}: ${menu.menu_icon}`)
                    })
                }
                
                resultDiv.innerHTML = results.join('<br>')
                
            } catch (error) {
                console.error('‚ùå Error updating icons:', error)
                resultDiv.innerHTML = `‚ùå Error: ${error.message}`
            }
        })
    </script>
</body>
</html>
